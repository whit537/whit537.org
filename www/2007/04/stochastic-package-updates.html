title = "Stochastic package updates"
published = "2007-04-17T16:31:00.000-04:00"
updated = "2011-04-10T09:52:45.323-04:00"
^L
^L
{% extends "blag.html" %}
{% block content %}
I am thoroughly confused: This afternoon I started setting up a new FreeBSD server. While doing that, I somehow broke bash on my FreeBSD workstation. Here's the error:<br /><pre>$ bash<br />/libexec/ld-elf.so.1: Shared object "libintl.so.6" not found, required by "bash"</pre>To cut to the chase, I fixed this by <a href="http://www.freebsd.org/cgi/cvsweb.cgi/ports/UPDATING.diff?r1=1.489;r2=1.490;f=h">forcing a gettext upgrade</a> across my installed packages:<br /><pre>$ sudo pkg_add -r portupgrade<br /><...><br />$ sudo portupgrade -rf gettext</pre>So bash is working again. However, I have no idea why it broke. Indeed, libintl.so.6 was apparently AWOL:<br /><pre>$ ldd /usr/local/bin/bash<br />/usr/local/bin/bash:<br />      libreadline.so.6 => /lib/libreadline.so.6 (0x404db000)<br />      libhistory.so.6 => /usr/lib/libhistory.so.6 (0x40508000)<br />      libncurses.so.6 => /lib/libncurses.so.6 (0x4050f000)<br />      libintl.so.6 => not found (0x0)<br />      libc.so.6 => /lib/libc.so.6 (0x4054e000)</pre>Or was it?<br /><pre>$ ls -l /usr/local/lib|grep libintl<br />-rw-r--r--   1 root  wheel    51150 Oct 12  2005 libintl.a<br />lrwxr-xr-x   1 root  wheel       12 Oct 12  2005 libintl.so -> libintl.so.6<br />-r--r--r--   1 root  wheel    40163 Oct 12  2005 libintl.so.6</pre>These files were there unchanged before the gettext upgrade. How did I end up with a bash that couldn't see them?<br /><br />The obvious scenario would be accidentally running some command on my workstation instead of the server I was setting up, but from the scrollback I can't see that I did that. I'm also not running any automatic port upgrades. What the heck did I do?!<div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/36506138-3771984380497162165?l=blag.whit537.org' alt='' /></div>
{% end %}
