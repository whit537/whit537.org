title = "Installing Zope 2.7 on Fedora 8"
published = "2009-01-10T20:50:00.030-05:00"
updated = "2011-04-10T09:52:45.013-04:00"
^L
^L
{% extends "base.html" %}
{% block content %}
<p>The short story is that you need to install <code>g++</code> on Fedora 8 before you can install Zope 2.7.</p><p>The long story starts with Zope 2.7 wanting Python 2.3, and not working out of the box with Python 2.5 or greater. You can force the install with Python 2.5 by passing <code>--with-python=/path/to/python2.5</code>to Zope's <code>configure</code>, but then you get this error on startup:<br /></p><pre>$ bin/zopectl start<br />Traceback (most recent call last):<br />[...]<br />AttributeError: 'wrapper_descriptor' object has no attribute 'im_func'<br />$</pre><p>At this point you can either fix Zope 2.7, or just install Python 2.3. No-brainer, right? Well, it turns out that Python 2.3comes with <a href="http://www.python.org/download/releases/2.3.7/">this warning</a>:</p><blockquote>[T]his release may fail to build on current operating systems [...]. [Y]ou might have to come up with work-arounds.</blockquote><p></p><p>Python 2.4, which Zope 2.7 can also use, has <a href="http://www.python.org/download/releases/2.4.6/">a parallel warning</a>. And I am here today because, verily, Fedora 8 falleth under these maledictions. Specifically, when you run <code>configure</code> for Python 2.3 on Fedora 8, you get this output:</p><pre>$ ./configure<br />checking MACHDEP... linux2<br />checking EXTRAPLATDIR...<br />checking for --without-gcc... no<br />checking for --with-cxx=<compiler>... no<br />checking for c++... no<br />checking for g++... no<br />checking for gcc... gcc<br />checking for C++ compiler default output file name... configure: error: C++ compiler cannot create executables<br />See `config.log' for more details.<br />$</compiler></pre><p>And here is what <code>config.log</code> has to say:</p><pre>configure:1753: checking for C++ compiler default output file name<br />configure:1756: gcc    conftest.cc  >&amp;5<br />gcc: error trying to exec 'cc1plus': execvp: No such file or directory<br />configure:1759: $? = 1<br />configure: failed program was:<br />| /* confdefs.h.  */<br />|<br />| #define _GNU_SOURCE 1<br />| #define _NETBSD_SOURCE 1<br />| #define __BSD_VISIBLE 1<br />| #define _BSD_TYPES 1<br />| #define _XOPEN_SOURCE 600<br />| #define _XOPEN_SOURCE_EXTENDED 1<br />| #define _POSIX_C_SOURCE 200112L<br />| /* end confdefs.h.  */<br />|<br />| int<br />| main ()<br />| {<br />|<br />|   ;<br />|   return 0;<br />| }<br />configure:1798: error: C++ compiler cannot create executables<br /></pre><p>Time, then, for a work-around (since fixing this can't possibly be more work than fixing Zope 2.7). Based on this line:</p><pre>gcc: error trying to exec 'cc1plus': execvp: No such file or directory</pre><p>I went on a wild goose chase for <code>cc1plus</code>. I ended up actually <code>svn checkout</code>-ing a couple different versions of GCC to track it down. (GCC, it turns out, is a truly monstrous codebase.) From what I can tell, it is the "actual" C++ compiler that a<code>gcc</code> front-end hands off to when it hits C++ code (I could be wrong). I found it on my local machine but not on the Fedora 8 server. Anyway, the Internet's advice was simply to install <code>g++</code>. So, not fully understanding the relationship between <code>gcc</code>, <code>g++</code>, and <code>cc1plus</code>, that's more or less what I did: a full, sandboxed<a href="http://gcc.gnu.org/releases.html">install of GCC from source</a>. Then I configured Python 2.3 <code>--with-cxx=$MYGXX</code>, and it worked all peachy.</p><p>I ended up installing GCC 3.4.6 because that's the version I have locally and it works. Later versions may very well work, and you could probably get a yum-packaged version to work too (if you're comfortable with package managers).</p><p>I did try telling Python's configure that <code>/usr/bin/gcc</code> was the C++ compiler.This fooled<code>configure</code>but then I simply hit the same<code>cc1plus</code>error in<code>make</code>.Upon reflection, this attempt sounds like a bit of a WTF. However, the <code>gcc</code> man page made it sound like this might in fact be true ("<code>gcc</code>- <i>GNU project C and C++ compiler</i>"), and I had/have a hard time believing that Fedora 8 doesn't come bundled with a C++ compiler.</p><p>Anyway, my tentative conclusion is that Fedora 8 indeed does <span class="Apple-style-span" style="font-style: italic;">not</span> have a C++ compiler, and you need to install one before you can build Python 2.3 on that platform. I don't know why Python versions 2.5 and later install cleanly, except that maybe the need for the C++ compiler was removed (since Python is written in C anyway; though is there a C++ API that you would need <code>g++</code> for?). I haven't made it to the bottom of this, in other words, but I've gone as far as I have time and need for at this point.<br /></p><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/36506138-4482715759608122646?l=blag.whit537.org' alt='' /></div>
{% end %}
