title = "Aspen, Marching to a Different Drummer"
published = "2011-08-28T03:02:00.014-04:00"
updated = "2011-08-28T14:56:33.257-04:00"
^L
^L
{% extends "blag.html" %}
{% block content %}
<p><a href="http://mechanicalcat.net/richard">Richard Jones</a> recently included <a href="http://aspen.io/">Aspen</a> in a Python web micro-framework shootout for <a href="http://pycon-au.org/">PyCon AU</a>. Video queued to the Aspen portion:</p><div style="padding: 1em 0; text-align: center;"><iframe width="400" height="325" src="http://www.youtube.com/embed/AYjPIMe0BhA#t=32m33s" frameborder="0" allowfullscreen></iframe><br /></div><p>Slides of the whole thing:<br /></p><div style="padding: 1em 0; text-align: center;"><iframe frameborder="0" height="334" marginheight="0" marginwidth="0" scrolling="no" src="http://www.slideshare.net/slideshow/embed_code/8952006" width="400"></iframe><br /></div><p>Out of ten contestants, Aspen comes in dead last! <a href="http://bottlepy.org/docs/dev/">Bottle</a>&nbsp;wins. But if you read the notes at the bottom of the slides, there’s an interesting twist.&nbsp;Richard begins his review of Aspen by noting that it has “[q]uite a different approach to things,” and concludes it by saying:</p><blockquote>I’ve given Aspen a rough time here because it’s not really suitable for my purposes, but I can see how it’d actually be really nice to develop a simple website with.</blockquote><p>That&rsquo;s fair ... especially since he doesn't explicitly say that Aspen would <i>not</i> be really nice for a complex website. ;-)<br /></p><p>You see, Aspen isn’t just a variation on a known web framework style—MVC, decorator-driven, class-based. Aspen is a new style. Aspen digs deeper in order to provide <a href="http://blip.tv/pyohio/aspen-a-next-generation-web-framework-5436552">simple, powerful, and clean web apps</a>&nbsp;that participate in the zen of the filesystem, of HTTP, and of Python—all at once. As a result, Aspen doesn’t fit current preconceived notions of what a web framework should look like. That’s how I interpret the results of this shoot-out. Aspen is simply marching to a different drummer, per Richard’s visual:<br /><img alt="Aspen is ... different." src="http://static.whit537.org/2011/different.jpg"></p><p>Maybe Aspen is the <a href="http://www.thedailyshow.com/watch/mon-august-15-2011/indecision-2012---corn-polled-edition---ron-paul---the-top-tier">Ron Paul</a> of Python web frameworks? :-)<br /></p><h3>Replies to Specific Items</h3><p>The major constructive criticism I am hearing is that Aspen’s <a href="http://aspen.io/">documentation</a> is “<i>seriously</i> thin,” which I half-accept. There’s a fair amount of information there, but I’m hearing from others as well that it’s not presented in an accessible way, and I can agree with that. Aspen’s documentation needs to be even better than normal precisely because it pushes the envelope. It&rsquo;s not there yet.<br /></p><p>The other thing I’m hearing is that “some things are inexplicably hard.” Apart from difficulty with things like page breaks that are actually part of the zen of Aspen, I was able to identify six specific instances of inexplicable hardness encountered in the review. I attribute these to a mixture of documentation failures and missing API. Hopefully I’ve been able to partially remedy some of them, at least, in the 0.11.11 release.</p><ol><li><b>Redirects</b> -&nbsp;I’ve added a simple <code>request.redirect</code> method to make redirects easier. It’s (thinly) <a href="http://aspen.io/request/">documented</a>. I hadn’t added it to date because what I really want to do is port the <a href="http://cherrypy.org/browser/trunk/cherrypy/_cperror.py#L154">more robust algorithm from CherryPy</a>, but this is a step in the right direction.</li>
<li><b>HTML escaping</b> -&nbsp;Aspen's&nbsp;<a href="http://aspen.io/templating/">templating</a>&nbsp;documentation mentions the helper function for escaping HTML, but didn’t mention that escaping isn't the default until now. It looks like Tornado made escaping the default in 2.0, so I’ll look at upgrading that library.</li>
<li><b>Request&nbsp;API</b> - The&nbsp;<code><a href="http://aspen.io/request/">request object</a></code>&nbsp;is an unstable API, but all of the interfaces used in Richard’s example are in fact mentioned in the documentation, including <code>request.body</code>. I guess that just goes to show how inaccessible the documentation really is. :-(</li>
<li><b><span class="Apple-style-span" style="font-weight: normal;"><div style="display: inline !important;"><b>Content-Type</b> - The default <code>Content-Type</code> is <code>text/plain</code>, and this is configurable website-wide using the <code>default_mimetype</code> key in <code><a href="http://aspen.io/aspen.conf/">aspen.conf</a></code>. However, the right way to encode the <code>Content-Type</code> for a specific resource in Aspen is via its file extension. In Richard’s example, the file should be named <code>edit.html</code> instead of just <code>edit</code>.</div></span></b></li>
<li><b><div style="display: inline !important;">Manual REST<span class="Apple-style-span" style="font-weight: normal;"> - In general, I consider branching based on request method to be flexible and clean. It’s no more manual than specially-naming methods, and the flow of control is easier to keep straight. However, the conditions themselves are a bit verbose, so I’ve added <code>request.GET</code>, etc., so you can use those instead of <code>request.method == "GET"</code>. This is (thinly) </span></div></b><b><div style="display: inline !important;"><span class="Apple-style-span" style="font-weight: normal;"><a href="http://aspen.io/request/">documented</a>.</span></div></b></li>
<li><b>WSGI</b> - Aspen does in fact expose a WSGI callable, at <code>aspen.wsgi.website</code>. The <a href="http://aspen.io/deployment/">deployment</a> docs identify Aspen as a WSGI application and show it used as such under <code>gunicorn</code> and <code>spawning</code>. I’ve gone back and tweaked that page to explicitly mention the location of Aspen’s WSGI callable.</li>
</ol><p>One last detail: Richard advises putting a script in your site root, but you shouldn&rsquo;t do that because it will be accessible through the web. Things like that belong either up a level or in the <code>.aspen</code> hidden directory, though honestly Aspen thinks of itself more as an app server than a web framework. It’s primarily designed to be run as an executable from the command line, and only secondarily to be imported as a library into a script of your own devising.</p><p>Thanks to Richard for putting Aspen to the test and providing valuable feedback!</p><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/36506138-3545887181323374884?l=blag.whit537.org' alt='' /></div>
{% end %}
