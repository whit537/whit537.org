title = "httpy is now WSGI middleware"
published = "2006-11-13T23:30:00.000-05:00"
updated = "2011-04-10T09:52:45.397-04:00"
[---]
[---] text/html
{% extends "base.html" %}
{% block content %}
For the record, I didn't invent <a href="http://www.python.org/dev/peps/pep-0333/">WSGI</a>. Not only that, I invented something called httpy to <a href="http://www.zetadev.com/software/httpy/0.9a2/man/wsgi.html">compete with it</a>. That's how bad <a href="http://tech.whit537.org/2006/10/my-name-is-chad-and-i-have-nih.html">my NIH syndrome</a> is.<br /><br />But it turns out that WSGI has <span style="font-style: italic;">*ahem*</span> seen somewhat better uptake than httpy. So I've swallowed my pride and rewritten httpy as a small piece of middleware. It's gone from 9500 lines of code (including 6750 lifted from Zope) to a <a href="http://www.zetadev.com/software/httpy/1.0a1/src/httpy.py">single module</a> with 64 lines of code! Wow! Yes, like <a href="http://www.canadianmaplesyrup.com/mapleboiling.html">maple syrup</a>, httpy has been <a href="http://www.zetadev.com/software/httpy/">boiled down to its essence</a>.<br /><br />Now, regarding WSGI, I had <a href="http://www.zetadev.com/software/httpy/0.9a2/man/wsgi.html">two complaints</a>: the API is ugly, and I'd rather share libraries than middleware. Well, the former still applies, but WSGI is <span style="font-style: italic;">supposed</span> to be ugly, and httpy is exactly the sort of thing that is <span style="font-style: italic;">supposed</span> to hide the ugliness.<br /><br />I was just plain wrong about middleware: it's great! The key is the shared <code>environ</code> mapping, which amounts to a <a href="http://en.wikipedia.org/wiki/Commons#Wider_usage_of_the_term">commons</a> for Python web programmers. Everyone's middleware throws stuff in the pot, and we're all free to pick and choose from it. This works for at least these reasons:<br /><ul><li>It's dead simple: it's just a dictionary.</li><li>It's non-intrusive: you can ignore whatever you don't want.</li><li>It honors the CGI standard and tradition.<br /></li></ul>I'm still pretty green with this, and I have to admit I have this lurking fear of middleware conflicts akin to <a href="http://tech.whit537.org/2006/10/baby-steps-with-easyinstall.html">what you see with packaging systems</a>. However, the worst case scenario now is that I end up only using a small set of trusted middleware. I still get all of the decoupling and deployment benefits of WSGI. And now with <a href="http://www.zetadev.com/software/httpy/">httpy</a>, I can generally avoid the crufty response API too.<div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/36506138-5775386358859647831?l=blag.whit537.org' alt='' /></div>
{% endblock %}